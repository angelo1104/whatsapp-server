//Importsimport express from "express";import mongoose from "mongoose";import Message from "./dbChat.js";import Pusher from "pusher"import cors from 'cors'//App configconst app = express()const port = process.env.PORT || 3000let pusher = new Pusher({    appId: '1079060',    key: 'bebe1133ba92e16d78fc',    secret: '86befeb0b4b0f60b9905',    cluster: 'ap1',    encrypted: true});//db configmongoose.connect('mongodb+srv://admin:hjjHIX1uWHNNZ2gm@cluster0.i857a.mongodb.net/whatsapp-chat?retryWrites=true&w=majority',{useNewUrlParser:true,useUnifiedTopology:true})const db = mongoose.connection;db.once('open',()=>{    console.log("DATABASE IS CONNECTED")    const msgCollection = db.collection('messagecontents')    const changeStream = msgCollection.watch();    changeStream.on('change',(change)=>{        console.log('change',change)        if (change.operationType === 'insert'){            const messageDetails = change.fullDocument;            pusher.trigger('messages','inserted',{                name: messageDetails.name,                message: messageDetails.message,                timestamp: messageDetails.timestamp,                received: messageDetails.received            })        }    })})//middlewareapp.use(express.json())app.use(cors())//routesapp.get('/',(req, res) => {    res.json("I am ready to eat bacon with honey and peanut butter.")})app.post('/api/v1/messages/new',(req, res) => {    Message.create({        name: req.body.name,        message: req.body.message,        timestamp: req.body.timestamp,        received: req.body.received    },(err,data)=>{        if (err){            res.status(500).json("There is an internal error.")        }else {            res.status(201).json(data)        }    })})app.get('/api/v1/messages/sync',(req, res) => {    Message.find({},(err,data)=>{        if (err){            res.status(500).json(err)        }else {            res.status(200).json(data)        }    })})//listenapp.listen(port,(req,res)=>{    console.log(`Server is running at port ${port}`)})//password - hjjHIX1uWHNNZ2gm